<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CateqApp - Meu Caderno Digital do Catequista</title>
    <!-- Chosen Palette: Vermelho Vibrante, Bege Médio, Bege Claro/Areia, Branco Puro, Cinza Escuro (Grafite) -->
    <!-- Application Structure Plan: A aplicação é uma SPA de múltiplas etapas. O fluxo inicia na tela principal (main-content), avança para a seleção de comunidade (community-selection-view) e, finalmente, para a exibição do formulário de presença (form-view) se a comunidade selecionada contiver o catequista 'Wellington'. Para as comunidades que não contêm 'Wellington', uma mensagem de não autorizado é exibida. Esta estrutura foi escolhida para simplificar o processo de registro, tornando-lo mais intuitivo e validando a adesão dos catequistas de forma mais direta. A navegação é controlada por botões de ação e um botão 'Voltar' contextual. -->
    <!-- Visualization & Content Choices: Apenas o nome do aplicativo 'CateqApp' estilizado é o principal elemento visual. Mensagens de boas-vindas e títulos de seção fornecem contexto textual. Botões dinâmicos para seleção de comunidade são os principais elementos interativos. O formulário de presença é embutido via iframe para o cenário de 'Wellington'. A apresentação é direta e funcional, focando na usabilidade e na validação da hipótese principal. CONFIRMING: NO SVG graphics used. NO Mermaid JS used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F5;
        }
        :root {
            --color-red-vibrant: #CC0000;
            --color-beige-medium: #D2B48C;
            --color-beige-light: #F5DEB3;
            --color-white-pure: #FFFFFF;
            --color-gray-dark: #333333;
            --stroke-red-dark: #990000;
            --stroke-beige-dark: #B09270;
            --stroke-beige-medium-dark: #A08B6B;
        }
        .text-red-vibrant { color: var(--color-red-vibrant); }
        .bg-red-vibrant { background-color: var(--color-red-vibrant); }
        .text-beige-medium { color: var(--color-beige-medium); }
        .bg-beige-medium { background-color: var(--color-beige-medium); }
        .text-beige-light { color: var(--color-beige-light); }
        .bg-beige-light { background-color: var(--color-beige-light); }
        .text-gray-dark { color: var(--color-gray-dark); }

        /* Estilos para o iframe do formulário */
        .form-container {
            width: 100%;
            max-width: 950px; /* Largura máxima conforme solicitado */
            height: 1284px; /* Altura fixa conforme solicitado */
            border: none;
            overflow: auto; /* Permite rolagem interna se o conteúdo exceder a altura */
            margin-left: auto; /* Centraliza o contêiner */
            margin-right: auto; /* Centraliza o contêiner */
        }
        @media (max-width: 768px) {
            .form-container {
                height: 90vh; /* Ajuste a altura para telas menores, permitindo rolagem */
                max-height: 1284px; /* Mantém a altura máxima */
            }
        }
        /* Estilos para o contêiner do logo do Canva */
        .canva-logo-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-top: 56.5217%; /* Aspect ratio do logo */
            padding-bottom: 0;
            box-shadow: 0 2px 8px 0 rgba(63,69,81,0.16);
            margin-top: 1.6em;
            margin-bottom: 0.9em;
            overflow: hidden;
            border-radius: 8px;
            will-change: transform;
        }
        .canva-logo-container iframe {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            border: none;
            padding: 0;
            margin: 0;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen bg-beige-light text-gray-dark p-4">

    <div class="bg-white rounded-xl shadow-lg p-8 md:p-12 max-w-2xl w-full text-center space-y-8">

        <!-- Main Content View -->
        <div id="main-content" class="flex flex-col items-center space-y-8">
            <div class="flex flex-col items-center space-y-4 w-full">
                <!-- O logo do Canva foi removido. Apenas o nome do APP será exibido. -->
                <h1 class="text-5xl md:text-6xl font-extrabold mt-4">
                    <span class="text-red-vibrant">Cateq</span><span class="text-beige-medium">App</span>
                </h1>
            </div>

            <p class="text-lg md:text-xl font-medium text-gray-dark">
                Bem-vindo, Catequista! Simplifique a gestão da sua turma e dedique mais tempo ao que realmente importa: a fé.
            </p>

            <div id="action-buttons" class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 justify-center mt-8">
                <button id="btn-presenca" class="block w-full md:w-auto px-8 py-4 rounded-lg font-semibold text-lg bg-red-vibrant text-white shadow-md hover:bg-red-800 transition-colors duration-300">
                    Registrar Presença
                </button>
            </div>
        </div>

        <!-- Community Selection View -->
        <div id="community-selection-view" class="hidden flex flex-col items-center space-y-8 w-full">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-dark">Selecione sua Comunidade</h2>
            <div id="community-buttons" class="flex flex-col space-y-4 w-full max-w-sm">
                <!-- Buttons will be dynamically added here by JavaScript -->
            </div>
            <button id="btn-back-community" class="px-6 py-3 rounded-lg font-semibold text-base bg-red-vibrant text-white shadow-md hover:bg-red-800 transition-colors duration-300 mt-4">
                Voltar
            </button>
        </div>

        <!-- Catequista Selection View - REMOVIDA -->

        <!-- Form View (now displays the iframe for Wellington, or an unauthorized message) -->
        <div id="form-view" class="hidden flex flex-col items-center space-y-4 w-full">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-dark">Registro de Presença</h2>
            <!-- Iframe do formulário de presença, visível apenas para Wellington -->
            <iframe id="iframe-presenca" class="form-container hidden" src="https://docs.google.com/forms/d/e/1FAIpQLSfAOuVYWhvmmSTCv8v9knuXD6IOlFxJ9jVzd5wqga7lkhTgTA/viewform?embedded=true"></iframe>
            <p id="unauthorized-message" class="hidden text-lg text-red-vibrant font-semibold">
                Funcionalidade de registro de presença disponível apenas para o catequista Wellington no momento.
            </p>
            <button id="btn-back-form" class="px-6 py-3 rounded-lg font-semibold text-base bg-red-vibrant text-white shadow-md hover:bg-red-800 transition-colors duration-300 mt-4">
                Voltar
            </button>
        </div>

        <footer class="mt-12 text-sm text-gray-500">
            <p>&copy; 2024 CateqApp. Conectando a fé, crescendo juntos.</p>
            <p>Sua jornada na catequese facilitada.</p>
        </footer>
    </div>

    <script>
        const mainContent = document.getElementById('main-content');
        const communitySelectionView = document.getElementById('community-selection-view');
        const formView = document.getElementById('form-view');

        const btnPresenca = document.getElementById('btn-presenca');
        const communityButtonsContainer = document.getElementById('community-buttons');
        const iframePresenca = document.getElementById('iframe-presenca');
        const unauthorizedMessage = document.getElementById('unauthorized-message');

        const btnBackCommunity = document.getElementById('btn-back-community');
        const btnBackForm = document.getElementById('btn-back-form');

        let currentView = 'main'; // Track current active view

        const communities = {
            "Matriz": ["Wellington", "João"],
            "Santa Filomena": ["Kary", "Eder"],
            "Nossa Senhora de Fátima": ["Debora", "Michelli"]
        };

        function hideAllViews() {
            mainContent.classList.add('hidden');
            communitySelectionView.classList.add('hidden');
            formView.classList.add('hidden');
            iframePresenca.classList.add('hidden');
            unauthorizedMessage.classList.add('hidden');
        }

        function showView(viewId) {
            hideAllViews();
            document.getElementById(viewId).classList.remove('hidden');
            currentView = viewId;
        }

        function renderCommunityButtons() {
            communityButtonsContainer.innerHTML = ''; // Clear previous buttons
            Object.keys(communities).forEach(communityName => {
                const button = document.createElement('button');
                button.className = 'block w-full px-8 py-4 rounded-lg font-semibold text-lg bg-beige-medium text-white shadow-md hover:bg-amber-800 transition-colors duration-300';
                button.textContent = communityName;
                button.addEventListener('click', () => handleCommunitySelection(communityName)); // Chama a nova função
                communityButtonsContainer.appendChild(button);
            });
        }

        // Função para lidar com a seleção da comunidade
        function handleCommunitySelection(communityName) {
            const catequistasInCommunity = communities[communityName];
            if (catequistasInCommunity.includes('Wellington')) {
                iframePresenca.classList.remove('hidden'); // Exibir o iframe para Wellington
                unauthorizedMessage.classList.add('hidden'); // Esconder mensagem de não autorizado
            } else {
                iframePresenca.classList.add('hidden'); // Esconder o iframe para outros
                unauthorizedMessage.classList.remove('hidden'); // Exibir mensagem de não autorizado
            }
            showView('form-view'); // Ir diretamente para a tela do formulário/status
        }

        function showCommunitySelectionView() { // Renomeada para clareza
            renderCommunityButtons();
            showView('community-selection-view');
        }

        function goBack() {
            if (currentView === 'form-view') {
                showView('community-selection-view'); // Volta para a seleção de comunidade
            } else if (currentView === 'community-selection-view') {
                showView('main-content'); // Volta para a tela principal
            }
        }

        // Event Listeners
        btnPresenca.addEventListener('click', showCommunitySelectionView); // Chama a nova função
        btnBackCommunity.addEventListener('click', goBack);
        btnBackForm.addEventListener('click', goBack);

        // Initialize view
        showView('main-content');
    </script>
</body>
</html>
